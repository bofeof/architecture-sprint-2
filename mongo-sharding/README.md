# Задание 2. Решение кейса с шардированием

Для шардирования добавлено 2 шарда, 3 роутера и 3 конфига. Настройки представлены в compose.yaml

## Как запустить

### Запускаем mongodb и приложение

```shell
docker compose up -d
```

### Запустить настройку БД, наполнение документами. Скрипт:

```shell
./scripts/init.sh
```

В скрипте будут настроены роутеры, шарды, конфиги. В конце выполнения скрипта будет показано количество документов в шардах

```shell
...
[✔] Шарды добавлены и коллекция зашардирована
[...] Проверка shard1
Количество документов в shard1: 492
[✔] Shard1 проверен
[...] Проверка shard2
Количество документов в shard2: 508
[✔] Shard2 проверен
```

Также дополнительно автоматизирована проверка доступности API на <server>/docs. Пример ответа

```
...
[...] Проверка доступности методов в http://localhost:8080/docs
Ответ от сервера: {"status":"OK","mongo_db":"somedb","items_count":1000}
[✔] Методы доступны, данные с бд можно получить
Финиш

```

## Проверка эндпойнтов

Узнать белый ip виртуальной машины

```shell
curl --silent http://ifconfig.me
```
Доступ к API-документации:

```
http://<ip виртуальной машины>:8080/docs
или
http://localhost:8080/docs
```
